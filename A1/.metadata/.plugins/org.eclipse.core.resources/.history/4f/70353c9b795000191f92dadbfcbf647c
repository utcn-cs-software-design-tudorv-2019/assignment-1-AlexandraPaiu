package Business;

import java.awt.HeadlessException;
import java.sql.SQLException;

import DBA.Conexiune;
import Data.Student;
import Data.StudentRepository;
import Data.Teacher;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.layout.VBox;
import javafx.scene.text.Text;
import javafx.stage.Modality;
import javafx.stage.Stage;

public class StudentBll {

	Stage scena;
	Student student;
	
	public StudentBll() {
		
	}
	
	public StudentBll(String name, String email,String password,String cnp,String address, String group) {
		this.student = new Student(name,email,password,cnp, address, Integer.parseInt(group));
	}
	
	public void adauga(){
		Conexiune co = new Conexiune();
		java.sql.Connection conex = co.getConex();
		try {
			StudentRepository c = new StudentRepository(conex);
			c.insert(student);
			this.showAt(scena, "Adaugare cu succes StudentBll");
		} catch (HeadlessException e) {
			this.showAt(scena, "Eroare la introducere");
			e.printStackTrace();
		}
		}
	
	    private void showAt(final Stage primaryStage, String text) {
	    	 final Stage dialog = new Stage();
             dialog.initModality(Modality.APPLICATION_MODAL);
             dialog.initOwner(primaryStage);
             VBox dialogVbox = new VBox(20);
             dialogVbox.getChildren().add(new Text(text.toString()));
             Scene dialogScene = new Scene(dialogVbox, 300, 200);
             dialog.setScene(dialogScene);
             dialog.show();
	    }
}
